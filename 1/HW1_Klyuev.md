## Задание

![[Pasted image 20250426175220.png]]
[Линк](https://www.architecturalkatas.com/kata.html?kata=TakingRequests.json)

## Выполнение

Проработаем этап «Сбор и анализ требований» по следующим пунктам:
- Отсев
- Scope Refinement
- Функциональные требования
- Нефункциональные требования
- Ограничения
- Расчет нагрузки:
    - Трафик
    - БД

### Отсев
1. Уверенность стейкхолдеров
   Идея сырая, запрос на взаимодействие с «какими-то пользователями, входящими в локальное музыкальное сообщество». Исходя из этого ориентируемся на то, что:
	- нужно сделать MVP, чтобы пропилотировать эту идею
	- провести дополнительное исследование ЦА (хотя-бы минимальный кастдев)
2. Что будет, если сорвем сроки?
   Срыв сроков не критичен для существования радиостанции, но потенциально может повлиять на темп её развития и прирост целевой аудитории -> привести к конкурентным потерям, в особенности в силу существования различных стриминговых сервисов. Без кастдева, впрочем, говорить об этом может быть преждевременным, поэтому критичность срыва сроков оценим как низко-среднюю
3. Как будем мерить успех?
   Гипотеза: запрос на реализацию сервиса мотивирован желанием увеличить целевую аудиторию и повысить рентабельность радиостанции за счет увеличения числа слушателей -> роста стоимости рекламы на радиостанции, поэтому успех будем мерить по приросту слушателей радиостанции и по длительности прослушивания каждым пользователем
   Здесь ожидаем прямую корреляцию между числом и длительностью пользования приложением и числом слушателей радиостанции, поэтому в качестве метрик успеха возьмем:
	   - DAU
	   - MAU
	   - Retention
5. Задел, бюджет, ресурсы
   Делаем MVP с ограниченным бюджетом, чтобы проверить гипотезу -> разворачиваться будем в облаке, чтобы минимизировать затраты на железо для радиостанции (можно взять cloud.ru / selectel.ru). Команда: 2 разработчика (фронт + бек), 1 UX/UI дизайнер

### Scope Refinement 
#### Хотим сделать:
Мобильную / веб-платформу, синхронизированную с прямым эфиром радиостанции, которая позволяет пользователям:
- Проходить простейшую авторизацию по логину и паролю
- Видеть песню, которая сейчас играет
- Оставлять заявки на песни
- Голосовать за следующие песни в эфире
- Голосовать за ежедневный плейлист
- Видеть, какие песни сейчас лидируют по голосам
и DJ / сотрудникам радиостанции:
- Проходить простейшую авторизацию по логину и паролю
- Загружать собственные варианты ежедневных плейлистов
- Видеть песни, на которые оставили заявки пользователи
- Видеть голоса за каждую песню
- Видеть голоса за ежедневный плейлист
- Добавлять песни, которые могут быть найдены пользователями при подаче заявок
#### Границы:
На этапе MVP:
- Нет полноценного чата
- Нет интеграции с социальными сетями
- Нет сложной персонализации

### Функциональные требования

#### Краткое описание
Поддержка разделения ролей в системе на пользователей и DJ / сотрудников, два типа авторизации, два типа интерфейса по ролям, отображение текущей песни, отображение списка поданных песен с возможностью ранжирования по числу голосов, отображение списка плейлистов с возможностью ранжирования.
#### Для пользователя (use-case, долгое описание):
Регистрация
	-> Ввести логин
	-> Ввести пароль
	-> Ввести почту для подтверждения регистрации
	-> Ввести код подтверждения из письма
	-> Попасть в систему
Авторизация
	-> Ввести логин
	-> Ввести пароль
	-> Попасть в систему
Просмотр основной страницы
	-> Увидеть песню, которая играет в данный момент
	-> Оставить заявку на песню
		-> Нажать кнопку «Оставить заявку на песню»
		-> Ввести название песни / исполнителя в поиск
		-> Кликнуть на песню из предложенных
	-> Проголосовать за следующую песню
		-> Увидеть список песен, на которые оставили заявки другие пользователи
		-> Проголосовать за те, которые понравились
	-> Проголосовать за ежедневный плейлист на следующий день
		-> Увидеть список ежедневных плейлистов, загруженных диджеями
		-> Пролистать плейлист 1, 2, etc
		-> Проголосовать за те, которые понравились
#### Для DJ / сотрудника радиостанции (use-case, долгое описание)
Регистрация
	-> Ввести логин
	-> Ввести пароль
	-> Ввести корпоративную почту сотрудника радиостанции для подтверждения регистрации
	-> Ввести код подтверждения из письма
	-> Попасть в систему
Авторизация
	-> Ввести логин
	-> Ввести пароль
	-> Попасть в систему
Просмотр интерфейса DJ / сотрудника радиостанции
	-> Просмотр списка песен, на которые оставили заявки пользователи, с ранжированием по числу голосов
	-> Просмотр списка ежедневных плейлистов с ранжированием по числу голосов пользователей

### Нефункциональные требования
#### Производительность:
- Отклик на подачу песни / голос не более 0.15 с
- Обновление состояния треков в реальном времени
#### Масштабируемость:
- Начальная нагрузка порядка от тысяч до десятков тысяч  пользователей (население одного города со скидкой на малый процент слушающих локальные радиостанции), система должна уметь масштабироваться горизонтально
#### Доступность:
- 99.5% uptime на этапе MVP
#### Безопасность:
- Механизмы защиты от накрутки голосов

#### Ограничения
1. Бизнес-модель:
   B2C (работа напрямую с конечным пользователем).
2. Бизнес-метрики:
   DAU/WAU, Retention Rate (возвраты пользователей), участие в голосованиях (% от слушателей).
3. География:
   Локальный рынок — радиус действия FM-станции (~один город). CDN не критичен.
4. Домен:
   Медиа и развлечения.
5. Тип устройств:
   Основной трафик — мобильные устройства (Android, iOS); web-приложение.
6. Этап развития:
   MVP на 3–4 месяца.
7. Тип развертывания:
   Cloud
8. Бюджет и стек:
   Ограниченный бюджет. Использование популярных фреймворков:
	- Frontend: React Native / PWA на React
	- Backend: Node.js + WebSocket API
	- БД: PostgreSQL + Redis для очередей/реалтайм-данных
9. SLA:
   Уровень SLA на этапе MVP невысокий — возможны простои в пределах нескольких часов в месяц.
10. Регуляторика:
    Пока без строгих требований, но потенциально 152-ФЗ.
11. Интеграции:
    Потенциально — интеграция с эфирным софтом радиостанции для автоматического определения текущей песни.
12. Санкции / Импортозамещение:
    Работа с отечественными провайдерами облаков (cloud.ru / selectel.ru).

### Расчет нагрузки
1. **Пользовательский трафик**:
   Пиковая аудитория: допустим 2000 пользователей одновременно.
   Голосования: 10–20% вовлеченности → 200–400 активных RPS (запросов в секунду) во время пиков.
   Оставление заявок на песни: единичные события (~5–10 в минуту).
2. **Сетевой трафик**:
   Передача текстовых данных, JSON-объектов (~1–2 КБ на событие).
   Стабильные соединения через WebSocket (~2–3 Мбит/с на 2000 клиентов).
3. **Вычислительная нагрузка**:
   Небольшая: подсчет голосов, хранение заявок — можно начать с одного сервера средней мощности.
4. **Дисковое пространство**:
   Минимальное: записи голосов/заявок + логи (~10–20 ГБ на полгода).